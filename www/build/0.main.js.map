{"version":3,"sources":["../../src/pages/drive/drive.module.ts","../../src/pages/drive/drive.ts","../../src/pipes/filter/filter.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAyC;AACO;AACZ;AACiB;AAcrD,IAAa,eAAe;IAA5B;IAA8B,CAAC;IAAD,sBAAC;AAAD,CAAC;AAAlB,eAAe;IAZ3B,sFAAQ,CAAC;QACR,YAAY,EAAE;YACZ,yDAAS;YACT,wEAAU;SACX;QACD,OAAO,EAAE;YACP,sEAAe,CAAC,QAAQ,CAAC,yDAAS,CAAC;SACpC;QACD,OAAO,EAAE;YACP,yDAAS;SACV;KACF,CAAC;GACW,eAAe,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;ACjBc;AACkC;AACE;AACA;AAO9E,IAAa,SAAS;IAQpB,mBAAoB,WAA8B,EAAU,IAAyB,EACjE,SAA0B,EAAU,IAAyB;QAD7D,gBAAW,GAAX,WAAW,CAAmB;QAAU,SAAI,GAAJ,IAAI,CAAqB;QACjE,cAAS,GAAT,SAAS,CAAiB;QAAU,SAAI,GAAJ,IAAI,CAAqB;QAN1E,eAAU,GAAG,EAAE,CAAC;QAOrB,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC;QAC7C,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC;QACnC,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC;IAC3C,CAAC;IAED,uCAAmB,GAAnB,UAAoB,IAAI;QACtB,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,KAAK,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QAC3F,CAAC,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,KAAK,KAAK,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;IAC/G,CAAC;IAED,+BAAW,GAAX,UAAY,QAAgB,EAAE,QAAiB;QAC7C,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;IAC5C,CAAC;IAED,gCAAY,GAAZ;QAAA,iBAkCC;QAjCC,IAAI,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;YACjC,KAAK,EAAE,eAAe;YACtB,MAAM,EAAE;gBACN;oBACE,IAAI,EAAE,MAAM;oBACZ,WAAW,EAAE,MAAM;iBACpB;aACF;YACD,OAAO,EAAE;gBACP;oBACE,IAAI,EAAE,QAAQ;iBACf;gBACD;oBACE,IAAI,EAAE,MAAM;oBACZ,OAAO,EAAE,cAAI;wBACX,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,KAAK,EAAE,CAAC;4BAAC,MAAM,CAAC,KAAK,CAAC;wBACnC,MAAM,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC;4BACpB,eAAe;4BACf,IAAM,eAAe,GAAG,KAAI,CAAC,aAAa,CAAC,EAAE,CAAC;4BAC9C,KAAI,CAAC,IAAI,CAAC,YAAY,CAAC,eAAe,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,SAAS,CAAC,gBAAM;gCACjE,EAAE,CAAC,CAAC,MAAM,CAAC,OAAO,KAAK,IAAI,CAAC,CAAC,CAAC;oCAC5B,KAAI,CAAC,IAAI,CAAC,aAAa,CAAC,eAAe,CAAC,CAAC;gCAC3C,CAAC;4BACH,CAAC,CAAC,CAAC;4BACH,eAAe;4BACf,iBAAiB;wBACnB,CAAC,CAAC,CAAC;wBACH,MAAM,CAAC,KAAK,CAAC;oBACf,CAAC;iBACF;aACF;SACF,CAAC,CAAC;QACH,MAAM,CAAC,OAAO,EAAE,CAAC;IACnB,CAAC;IAED,8BAAU,GAAV;QACE,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC;IACzB,CAAC;IAED,8BAAU,GAAV;QAAA,iBAoCC;QAnCC,IAAM,YAAY,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,IAAI,EAAE,CAAC,KAAK,CAAC;QACzD,IAAI,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;YACjC,KAAK,EAAE,QAAQ;YACf,MAAM,EAAE;gBACN;oBACE,IAAI,EAAE,MAAM;oBACZ,WAAW,EAAE,MAAM;oBACnB,KAAK,EAAE,YAAY,CAAC,IAAI;iBACzB;aACF;YACD,OAAO,EAAE;gBACP;oBACE,IAAI,EAAE,QAAQ;iBACf;gBACD;oBACE,IAAI,EAAE,MAAM;oBACZ,OAAO,EAAE,cAAI;wBACX,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,KAAK,EAAE,CAAC;4BAAC,MAAM,CAAC,KAAK,CAAC;wBACnC,MAAM,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC;4BACpB,eAAe;4BACf,IAAM,eAAe,GAAG,KAAI,CAAC,IAAI,CAAC,aAAa,CAAC,EAAE,CAAC;4BACnD,KAAI,CAAC,IAAI,CAAC,UAAU,CAAC,YAAY,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,SAAS,CAAC,gBAAM;gCAC5D,EAAE,CAAC,CAAC,MAAM,CAAC,OAAO,KAAK,IAAI,CAAC,CAAC,CAAC;oCAC5B,KAAI,CAAC,IAAI,CAAC,aAAa,CAAC,eAAe,CAAC,CAAC;gCAC3C,CAAC;4BACH,CAAC,CAAC,CAAC;4BACH,eAAe;4BACf,iBAAiB;wBACnB,CAAC,CAAC,CAAC;wBACH,MAAM,CAAC,KAAK,CAAC;oBACf,CAAC;iBACF;aACF;SACF,CAAC,CAAC;QACH,MAAM,CAAC,OAAO,EAAE,CAAC;IACnB,CAAC;IAED,+BAAW,GAAX;QAAA,iBA6BC;QA5BC,IAAI,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;YAChC,KAAK,EAAE,gBAAgB;YACvB,OAAO,EAAE,8CAA8C;YACvD,OAAO,EAAE;gBACP;oBACE,IAAI,EAAE,QAAQ;oBACd,IAAI,EAAE,QAAQ;iBACf;gBACD;oBACE,IAAI,EAAE,QAAQ;oBACd,OAAO,EAAE;wBACP,KAAK,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC;4BACnB,eAAe;4BACf,IAAM,eAAe,GAAG,KAAI,CAAC,IAAI,CAAC,aAAa,CAAC,EAAE,CAAC;4BACnD,KAAI,CAAC,IAAI,CAAC,WAAW,CAAC,KAAI,CAAC,QAAQ,CAAC,CAAC,SAAS,CAAC,gBAAM;gCACnD,EAAE,CAAC,CAAC,MAAM,CAAC,OAAO,KAAK,IAAI,CAAC,CAAC,CAAC;oCAC5B,KAAI,CAAC,IAAI,CAAC,aAAa,CAAC,eAAe,CAAC,CAAC;gCAC3C,CAAC;4BACH,CAAC,CAAC,CAAC;4BACH,eAAe;4BACf,iBAAiB;wBACnB,CAAC,CAAC,CAAC;wBACH,MAAM,CAAC,KAAK,CAAC;oBACf,CAAC;iBACF;aACF;SACF,CAAC,CAAC;QACH,KAAK,CAAC,OAAO,EAAE,CAAC;IAClB,CAAC;IAED,gCAAY,GAAZ;QAAA,iBA6BC;QA5BC,IAAI,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;YAChC,KAAK,EAAE,iBAAiB;YACxB,OAAO,EAAE,gDAAgD;YACzD,OAAO,EAAE;gBACP;oBACE,IAAI,EAAE,QAAQ;oBACd,IAAI,EAAE,QAAQ;iBACf;gBACD;oBACE,IAAI,EAAE,SAAS;oBACf,OAAO,EAAE;wBACP,KAAK,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC;4BACnB,eAAe;4BACf,IAAM,eAAe,GAAG,KAAI,CAAC,IAAI,CAAC,aAAa,CAAC,EAAE,CAAC;4BACnD,KAAI,CAAC,IAAI,CAAC,YAAY,CAAC,KAAI,CAAC,QAAQ,CAAC,CAAC,SAAS,CAAC,gBAAM;gCACpD,EAAE,CAAC,CAAC,MAAM,CAAC,OAAO,KAAK,IAAI,CAAC,CAAC,CAAC;oCAC5B,KAAI,CAAC,IAAI,CAAC,aAAa,CAAC,eAAe,CAAC,CAAC;gCAC3C,CAAC;4BACH,CAAC,CAAC,CAAC;4BACH,eAAe;4BACf,iBAAiB;wBACnB,CAAC,CAAC,CAAC;wBACH,MAAM,CAAC,KAAK,CAAC;oBACf,CAAC;iBACF;aACF;SACF,CAAC,CAAC;QACH,KAAK,CAAC,OAAO,EAAE,CAAC;IAClB,CAAC;IAED,gCAAY,GAAZ;QAAA,iBAKC;QAJC,IAAM,YAAY,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,IAAI,EAAE,CAAC,KAAK,CAAC;QACzD,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,CAAC,SAAS,CAAC,gBAAM;YACnD,EAAE,CAAC,CAAC,MAAM,CAAC,OAAO,KAAK,IAAI,CAAC;gBAAC,KAAI,CAAC,IAAI,CAAC,aAAa,EAAE,CAAC;QACzD,CAAC,CAAC,CAAC;IACL,CAAC;IAED,8BAAU,GAAV;IACA,CAAC;IAED,kCAAc,GAAd,UAAe,KAAK;QAClB,IAAI,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,oBAAoB,EAAE,EAAC,MAAM,EAAE,IAAI,EAAC,CAAC,CAAC;QAC5E,OAAO,CAAC,OAAO,CAAC;YACd,EAAE,EAAE,KAAK;SACV,CAAC,CAAC;IACL,CAAC;IAED,kCAAc,GAAd;QAAA,iBAOC;QANC,IAAM,YAAY,GAAG,IAAI,CAAC,IAAI,CAAC,eAAe,EAAE,CAAC,SAAS,CAAC,kBAAQ;YACjE,EAAE,CAAC,CAAC,QAAQ,KAAK,IAAI,CAAC,CAAC,CAAC;gBACtB,YAAY,CAAC,WAAW,EAAE,CAAC;gBAC3B,KAAI,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC;YAC5B,CAAC;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IACH,gBAAC;AAAD,CAAC;AA7LY,SAAS;IALrB,uFAAS,EAAE;IACX,wFAAS,CAAC;QACT,QAAQ,EAAE,YAAY;OACG;KAC1B,CAAC;iLASiC,EAAoD;QACtD,MAAkD;AAoLlF;SA7LY,SAAS,e;;;;;;;;;;;;;;;;;ACV8B;AACgB;AAKpE,IAAa,UAAU;IAAvB;IAeA,CAAC;IAdC;;OAEG;IACH,8BAAS,GAAT,UAAU,KAAY,EAAE,MAAc,EAAE,KAAgB;QACtD,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC;YAAC,MAAM,CAAC,KAAK,CAAC;QACzB,IAAM,eAAe,GAAG,MAAM,CAAC,WAAW,EAAE,CAAC;QAC7C,IAAM,WAAW,GAAG,CAAC,KAAK,KAAK,uFAAS,CAAC,OAAO,CAAC,CAAC;QAClD,MAAM,CAAC,KAAK,CAAC,MAAM,CAAC,cAAI;YACtB,IAAM,aAAa,GAAG,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,GAAG,EAAE,CAAC;YAC/D,IAAM,WAAW,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,KAAK,MAAM,CAAC,CAAC;gBAC1C,CAAC,WAAW,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,GAAG,IAAI,CAAC;YACpE,MAAM,CAAC,CAAC,aAAa,CAAC,QAAQ,CAAC,eAAe,CAAC,IAAI,WAAW,CAAC,CAAC;QAClE,CAAC,CAAC,CAAC;IACL,CAAC;IACH,iBAAC;AAAD,CAAC;AAfY,UAAU;IAHtB,kFAAI,CAAC;QACJ,IAAI,EAAE,UAAU;KACjB,CAAC;GACW,UAAU,CAetB;AAfsB","file":"0.main.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { DrivePage } from './drive';\r\nimport {FilterPipe} from \"../../pipes/filter/filter\";\r\n\r\n@NgModule({\r\n  declarations: [\r\n    DrivePage,\r\n    FilterPipe,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(DrivePage),\r\n  ],\r\n  exports: [\r\n    DrivePage\r\n  ]\r\n})\r\nexport class DrivePageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/drive/drive.module.ts","import { Component } from '@angular/core';\r\nimport {AlertController, IonicPage, PopoverController} from 'ionic-angular';\r\nimport {DataServiceProvider} from \"../../providers/data-service/data-service\";\r\nimport {AuthServiceProvider} from \"../../providers/auth-service/auth-service\";\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-drive',\r\n  templateUrl: 'drive.html'\r\n})\r\nexport class DrivePage {\r\n\r\n  private currentFolder;\r\n  public searchText = \"\";\r\n\r\n  private selected;\r\n  private selectedIds;\r\n\r\n  constructor(private popoverCtrl: PopoverController, private data: DataServiceProvider,\r\n              private alertCtrl: AlertController, private auth: AuthServiceProvider) {\r\n    this.currentFolder = this.data.currentFolder;\r\n    this.selected = this.data.selected;\r\n    this.selectedIds = this.data.selectedIds;\r\n  }\r\n\r\n  updateSelectedItems(item) {\r\n    (this.selected.has(item) === false) ? this.selected.add(item) : this.selected.delete(item);\r\n    (this.selectedIds.has(item.id) === false) ? this.selectedIds.add(item.id) : this.selectedIds.delete(item.id);\r\n  }\r\n\r\n  enterFolder(folderId: number, parentId?: number, ) {\r\n    this.data.enterFolder(folderId, parentId);\r\n  }\r\n\r\n  createFolder() {\r\n    let prompt = this.alertCtrl.create({\r\n      title: 'Create Folder',\r\n      inputs: [\r\n        {\r\n          name: 'name',\r\n          placeholder: 'Name'\r\n        },\r\n      ],\r\n      buttons: [\r\n        {\r\n          text: 'Cancel'\r\n        },\r\n        {\r\n          text: 'Save',\r\n          handler: data => {\r\n            if (data.name === \"\") return false;\r\n            prompt.dismiss().then(() => {\r\n              // Show spinner\r\n              const currentFolderId = this.currentFolder.id;\r\n              this.data.createFolder(currentFolderId, data.name).subscribe(result => {\r\n                if (result.success === true) {\r\n                  this.data.refreshFolder(currentFolderId);\r\n                }\r\n              });\r\n              // hide spinner\r\n              // clear selected\r\n            });\r\n            return false;\r\n          }\r\n        }\r\n      ]\r\n    });\r\n    prompt.present();\r\n  }\r\n\r\n  exitFolder() {\r\n    this.data.exitFolder();\r\n  }\r\n\r\n  renameItem() {\r\n    const selectedItem = this.selected.values().next().value;\r\n    let prompt = this.alertCtrl.create({\r\n      title: 'Rename',\r\n      inputs: [\r\n        {\r\n          name: 'name',\r\n          placeholder: 'Name',\r\n          value: selectedItem.name\r\n        },\r\n      ],\r\n      buttons: [\r\n        {\r\n          text: 'Cancel'\r\n        },\r\n        {\r\n          text: 'Save',\r\n          handler: data => {\r\n            if (data.name === \"\") return false;\r\n            prompt.dismiss().then(() => {\r\n              // Show spinner\r\n              const currentFolderId = this.data.currentFolder.id;\r\n              this.data.renameItem(selectedItem, data.name).subscribe(result => {\r\n                if (result.success === true) {\r\n                  this.data.refreshFolder(currentFolderId);\r\n                }\r\n              });\r\n              // hide spinner\r\n              // clear selected\r\n            });\r\n            return false;\r\n          }\r\n        }\r\n      ]\r\n    });\r\n    prompt.present();\r\n  }\r\n\r\n  deleteItems() {\r\n    let alert = this.alertCtrl.create({\r\n      title: 'Confirm delete',\r\n      message: 'Are you sure you want to delete these items?',\r\n      buttons: [\r\n        {\r\n          text: 'Cancel',\r\n          role: 'cancel'\r\n        },\r\n        {\r\n          text: 'Delete',\r\n          handler: () => {\r\n            alert.dismiss().then(() => {\r\n              // Show spinner\r\n              const currentFolderId = this.data.currentFolder.id;\r\n              this.data.deleteItems(this.selected).subscribe(result => {\r\n                if (result.success === true) {\r\n                  this.data.refreshFolder(currentFolderId);\r\n                }\r\n              });\r\n              // hide spinner\r\n              // clear selected\r\n            });\r\n            return false;\r\n          }\r\n        }\r\n      ]\r\n    });\r\n    alert.present();\r\n  }\r\n\r\n  restoreItems() {\r\n    let alert = this.alertCtrl.create({\r\n      title: 'Confirm restore',\r\n      message: 'Aree you sure you want to restore these items?',\r\n      buttons: [\r\n        {\r\n          text: 'Cancel',\r\n          role: 'cancel'\r\n        },\r\n        {\r\n          text: 'Restore',\r\n          handler: () => {\r\n            alert.dismiss().then(() => {\r\n              // Show spinner\r\n              const currentFolderId = this.data.currentFolder.id;\r\n              this.data.restoreItems(this.selected).subscribe(result => {\r\n                if (result.success === true) {\r\n                  this.data.refreshFolder(currentFolderId);\r\n                }\r\n              });\r\n              // hide spinner\r\n              // clear selected\r\n            });\r\n            return false;\r\n          }\r\n        }\r\n      ]\r\n    });\r\n    alert.present();\r\n  }\r\n\r\n  downloadItem() {\r\n    const selectedItem = this.selected.values().next().value;\r\n    this.data.downloadItem(selectedItem).subscribe(result => {\r\n      if (result.success === true) this.data.clearSelected();\r\n    });\r\n  }\r\n\r\n  shareItems() {\r\n  }\r\n\r\n  presentPopover(event) {\r\n    let popover = this.popoverCtrl.create(\"PopoverOptionsPage\", {parent: this});\r\n    popover.present({\r\n      ev: event\r\n    });\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    const subscription = this.auth.isAuthenticated().subscribe(hasToken => {\r\n      if (hasToken === true) {\r\n        subscription.unsubscribe();\r\n        this.data.enterFolder(-1);\r\n      }\r\n    });\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/drive/drive.ts","import { Pipe, PipeTransform } from '@angular/core';\r\nimport {PageState} from \"../../providers/data-service/data-service\";\r\n\r\n@Pipe({\r\n  name: 'myFilter',\r\n})\r\nexport class FilterPipe implements PipeTransform {\r\n  /**\r\n   * Filters an array of values by a string.\r\n   */\r\n  transform(items: any[], filter: string, state: PageState) {\r\n    if (!items) return items;\r\n    const lowercaseFilter = filter.toLowerCase();\r\n    const keepDeleted = (state === PageState.DELETED);\r\n    return items.filter(item =>  {\r\n      const lowercaseItem = item.name ? item.name.toLowerCase() : \"\";\r\n      const otherFilter = ((item.type === \"file\")) ?\r\n        (keepDeleted ? (!!item.deleted_at) : !(!!item.deleted_at)) : true;\r\n      return (lowercaseItem.includes(lowercaseFilter) && otherFilter);\r\n    });\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pipes/filter/filter.ts"],"sourceRoot":""}