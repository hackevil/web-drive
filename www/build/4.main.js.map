{"version":3,"sources":["../../src/pages/main/main.module.ts","../../src/pages/main/main.ts"],"names":[],"mappings":"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","file":"4.main.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { MainPage } from './main';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    MainPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(MainPage),\r\n  ],\r\n  exports: [\r\n    MainPage\r\n  ]\r\n})\r\nexport class MainPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/main/main.module.ts","import {Component, ViewChild} from '@angular/core';\r\nimport {IonicPage, NavController} from 'ionic-angular';\r\nimport {AuthServiceProvider, User} from \"../../providers/auth-service/auth-service\";\r\nimport {DataServiceProvider, PageState} from \"../../providers/data-service/data-service\";\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-main',\r\n  templateUrl: 'main.html',\r\n})\r\nexport class MainPage {\r\n\r\n  @ViewChild('fileInput') fileInput;\r\n\r\n  public activePage = \"DrivePage\";\r\n  private currentUser: User;\r\n\r\n  constructor(private auth: AuthServiceProvider, private data: DataServiceProvider,\r\n              public navCtrl: NavController) {\r\n    this.currentUser = this.auth.authUser;\r\n  }\r\n\r\n  goToTrash() {\r\n    this.data.state = PageState.DELETED;\r\n    this.transitionPage();\r\n  }\r\n\r\n  goToFiles() {\r\n    this.data.state = PageState.FILES;\r\n    this.transitionPage();\r\n  }\r\n\r\n  private transitionPage() {\r\n    this.data.clearSelected();\r\n    this.data.currentFolder.folders = [];\r\n    this.data.currentFolder.files = [];\r\n    this.data.folderLevels = [];\r\n    this.data.enterFolder(-1);\r\n  }\r\n\r\n\r\n  chooseFiles() {\r\n    let event: MouseEvent = new MouseEvent('click', {bubbles: false});\r\n    this.fileInput.nativeElement.dispatchEvent(event);\r\n  }\r\n\r\n  fileInputChangeEvent() {\r\n    const inputElement: HTMLInputElement = this.fileInput.nativeElement;\r\n    let count: number = inputElement.files.length;\r\n    let formData = new FormData();\r\n    if (count > 0) {\r\n      for (let i = 0; i < count; i++) {\r\n        formData.append('files[]', inputElement.files.item(i));\r\n      }\r\n      const folderId = this.data.currentFolder.id;\r\n      formData.set(\"folderId\", folderId.toString());\r\n      this.data.uploadFiles(formData).subscribe(result => {\r\n        if (result.success === true) {\r\n          this.data.refreshFolder(folderId);\r\n        }\r\n        inputElement.value = null;\r\n      });\r\n    }\r\n  }\r\n\r\n  logout() {\r\n    this.auth.logout();\r\n    this.navCtrl.setRoot(\"WelcomePage\");\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    this.goToFiles();\r\n    const subscription = this.auth.isAuthenticated().subscribe(hasToken => {\r\n      subscription.unsubscribe();\r\n      if (hasToken === true) {\r\n        // Load user from server.\r\n        this.currentUser = this.auth.loadAuthenticatedUser();\r\n      } else {\r\n        this.logout();\r\n      }\r\n    });\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/main/main.ts"],"sourceRoot":""}